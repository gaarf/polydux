<script>
/* global POLYSTUFF, Redux:false */
window.POLYSTUFF = window.POLYSTUFF || {};

(function () {
  class Reducers {
    constructor(handlers={}) {
      this._handlers = handlers;
    }

    get combined() {
      return Redux.combineReducers(this._handlers);
    }

    get keys() {
      return Object.keys(this._handlers);
    }

    get shape() {
      return this.keys.reduce((out, key) => {
        out[key] = {};
        return out;
      }, {});
    }

    add(key, fn) {
      this._handlers[key] = fn;
      return this;
    }
  }

  POLYSTUFF.reducers = new Reducers({

    meta(state={}, action){
      if(action.type === 'META_UPDATE') {
        return Object.assign({}, state, action.data);
      }
      return state;
    }

  });

})();
</script>
<script src="counter.js"></script>
<script src="user.js"></script>
